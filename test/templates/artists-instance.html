{%extends "base.html"%}

{%block content%}

	<link rel="stylesheet" type="text/css" href="css/instance.css">
	<div id="instance-main">
	</div>
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<!-- Include all compiled plugins (below), or include individual files as needed -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<script>
		var getUrlParams = function() {
		    var vars = [], hash;
		    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
		    for(var i = 0; i < hashes.length; i++)
		    {
		        hash = hashes[i].split('=');
		        vars.push(hash[0]);
		        vars[hash[0]] = hash[1];
		    }
		    return vars;
		}
		var artistName = getUrlParams()["name"].substring(3, getUrlParams()["name"].length - 3).replace("%20", " ");
		var cardId = getUrlParams()["id"];

		
		$("#instance-main").append("<h4><strong>Number of Cards: </strong>1</h4>");
		$("#instance-main").append("<h4><strong>Number of Sets: </strong>1</h4>");
		
		var xmlHttp = new XMLHttpRequest();
		xmlHttp.onreadystatechange = function() {
		    if (this.readyState == 4 && this.status == 200) { //Successful GET request
		        var card = JSON.parse(this.responseText);

		        $("#instance-main").prepend("<h1>" + artistName + "</h1>");
		        $("#instance-main").append("<h4><strong>Cards: </strong>" + card["card"]["name"] + "</h4>");
				$("#instance-main").append("<h4><strong>Sets: </strong>" + card["card"]["setName"] + "</h4>");
		    }
		};

		var cardId = getUrlParams()["id"];
	    xmlHttp.open("GET", "https://api.magicthegathering.io/v1/cards/" + cardId, true); 
	    xmlHttp.send(null);
	</script>

{% endblock %}